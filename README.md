# Sync-Island

同步岛是一个基于双缓冲区以及环形消息队列的同步机制，用于解决多线程之间的数据同步问题，避免脏读脏写。

## 1. 背景

在多线程编程中，我们经常需要处理多个线程之间的数据同步问题。例如，一个线程需要等待另一个线程完成某个操作后才能继续执行。传统的同步机制如互斥锁、信号量等虽然可以解决数据同步问题，但它们可能会导致线程阻塞，降低程序的性能。

为了解决这个问题，我们提出了一种基于双缓冲区以及环形消息队列的同步机制，称为同步岛。同步岛通过将数据分为两个缓冲区，并使用环形消息队列来管理数据的读写操作，从而实现数据的同步，避免了线程阻塞，提高了程序的性能。

## 2. 实现原理

> 由于读取不会产生阻塞，写入会产生阻塞，所以同步岛只阐述写入的阻塞问题。

### 单生产者模型

#### 只读最新的数据

在单生产者模型中，只有一个线程负责写入数据，其他线程负责读取数据。为了实现数据的同步，同步岛使用双缓冲区模型，同时保证索引更新的原子性。

#### 顺序读取

为了实现顺序读取，同步岛使用环形消息队列来管理数据的读写操作。当写入线程写入数据时，它会将数据放入环形消息队列中，并通知读取线程有新数据可读。读取线程会从环形消息队列中读取数据，并更新读取索引。

### 多生产者模型

在多生产者模型中，有多个线程负责写入数据，其他线程负责读取数据。为了实现数据的同步，同步岛使用环形消息队列的模型，只需保证出队时，索引更新的原子性即可，则多生产者模型就会退化成单生产者模型。

